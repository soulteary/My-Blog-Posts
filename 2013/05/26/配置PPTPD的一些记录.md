# 配置PPTPD的一些记录

出于某些原因和考虑，使用比较古老的pptpd。 为了系统健康，导入key，yum install 各种。

一些顺利后，发现网上的各种版本的iptables转发貌似不太对。

这里有一份测试通过的，留个纪念，或许你也会用到：）

```bash
*nat
:PREROUTING ACCEPT [517:36019]
:POSTROUTING ACCEPT [1:61]
:OUTPUT ACCEPT [1:61]
-A POSTROUTING -s 192.168.254.0/24 -o eth0 -j MASQUERADE
-A POSTROUTING -s 192.168.254.0/24 -o eth0 -j SNAT --to-source yourip
COMMIT
# Completed on Fri May 24 20:14:41 2013
# Generated by iptables-save v1.4.7 on Fri May 24 20:14:41 2013
*filter
:INPUT ACCEPT [67:3720]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [43:2928]
-A INPUT -i lo -j ACCEPT
-A INPUT -i ppp0 -j ACCEPT
-A INPUT -i eth0 -p tcp -m tcp --dport 1723 -j ACCEPT
-A INPUT -i eth0 -p gre -j ACCEPT
-A FORWARD -i ppp0 -o eth0 -j ACCEPT
-A OUTPUT -o lo -j ACCEPT
-A OUTPUT -o eth0 -p udp -m udp --dport 53 -m state --state NEW,ESTABLISHED -j ACCEPT
COMMIT
# Completed on Fri May 24 20:14:41 2013
"/etc/sysconfig/iptables" 23L, 816C                           23,1          Bot
# Generated by iptables-save v1.4.7 on Fri May 24 20:14:41 2013
*nat
:PREROUTING ACCEPT [517:36019]
:POSTROUTING ACCEPT [1:61]
:OUTPUT ACCEPT [1:61]
-A POSTROUTING -s 192.168.254.0/24 -o eth0 -j MASQUERADE
-A POSTROUTING -s 192.168.254.0/24 -o eth0 -j SNAT --to-source yourip
COMMIT
# Completed on Fri May 24 20:14:41 2013
# Generated by iptables-save v1.4.7 on Fri May 24 20:14:41 2013
*filter
:INPUT ACCEPT [67:3720]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [43:2928]
-A INPUT -i lo -j ACCEPT
-A INPUT -i ppp0 -j ACCEPT
-A INPUT -i eth0 -p tcp -m tcp --dport 1723 -j ACCEPT
-A INPUT -i eth0 -p gre -j ACCEPT
-A FORWARD -i ppp0 -o eth0 -j ACCEPT
-A OUTPUT -o lo -j ACCEPT
-A OUTPUT -o eth0 -p udp -m udp --dport 53 -m state --state NEW,ESTABLISHED -j ACCEPT
COMMIT
# Completed on Fri May 24 20:14:41 2013
~
```

以上等你用到的时候，你就会明白，我写的是什么了。

